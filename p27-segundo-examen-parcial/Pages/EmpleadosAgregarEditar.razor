@page "/empleado/agregar"
@page "/empleado/editar/{Id:int}"
@inject EmpleadoServicio empleadoServicio
@inject NavigationManager NavigationManager

<h3>@Titulo</h3>

<div class="row">
    <div class="col-md-6">
        <EditForm Model="@emp" OnValidSubmit="Grabar">
            <DataAnnotationsValidator/>
            <div class="form-group">
                <label for="Descripcion">Descripcion</label>
                <InputText class="form-control" @bind-Value="emp.Descripcion"/> 
                <ValidationMessage For="@(()=>emp.Descripcion)"/>
            </div>
            <div class="form-group">
                <label for="FechaAlta">FechaAlta</label>
                <InputDate class="form-control" @bind-Value="emp.FechaAlta"/>
                <ValidationMessage For="@(()=>emp.FechaAlta)"/>
            </div>
            <div class="form-group">
                <label for="Cantidad">Cantidad</label>
                <InputNumber typeclass="form-control" @bind-Value="emp.Cantidad"/>
                <ValidationMessage For="@(()=>emp.Cantidad)"/>
            </div>
             <div class="form-group">
                <label for="Precio">Precio</label>
                <InputNumber typeclass="form-control" @bind-Value="emp.Precio"/>
                <ValidationMessage For="@(()=>emp.Precio)"/>
            </div>
            <div class="form-group">
                <label for="UdeMedida">UdeMedida</label>
                <InputText class="form-control" @bind-Value="emp.UdeMedida"/>
                <ValidationMessage For="@(()=>emp.UdeMedida)"/>
            </div>
            <div>
                @mensaje
            </div>
            <div class="row">
                <div class="col-md-4">
                    <div class="form-group">
                    <input type="submit" class="btn btn-primary" value="Grabar"/>
                    <input type="button" class="btn btn-primary" @onclick="@Cancel" value="Cancelar"/>
                </div>
            </div>
        </div>
    </EditForm>
    </div>
</div>

@code {
    [Parameter]
    public int Id {get; set;}
    Articulo emp = new Articulo();

    private string mensaje = string.Empty;
    private string Titulo="Agregar Persona";

    protected void Grabar() {
        if(empleadoServicio.AgregarActualizar(emp)) {
            mensaje = "Agregado exitosamente ";
        } else mensaje = "No pudo agregarse";
        NavigationManager.NavigateTo("empleados",forceLoad:true);
    }

    void Cancel() {
        NavigationManager.NavigateTo("empleados",forceLoad:true);
    }
    
    protected override void OnInitialized() {
        if (Id > 0) {
        Titulo = "Actualizar Persona";
        emp = empleadoServicio.EcontrarPorId(Id); }
        base.OnInitialized();
        }
}